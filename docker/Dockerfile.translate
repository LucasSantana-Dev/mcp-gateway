FROM python:3.12-slim

RUN apt-get update && apt-get install -y --no-install-recommends nodejs npm curl ca-certificates \
  && apt-get clean && rm -rf /var/lib/apt/lists/*

RUN pip install --no-cache-dir mcp-contextforge-gateway==0.9.0

WORKDIR /app

HEALTHCHECK --interval=30s --timeout=3s --start-period=5s --retries=3 \
  CMD python3 -c "import mcpgateway.translate; import sys; sys.exit(0)"

CMD ["python3", "-m", "mcpgateway.translate"]
